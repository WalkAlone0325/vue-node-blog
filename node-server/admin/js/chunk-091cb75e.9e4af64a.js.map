{"version":3,"sources":["webpack:///./src/views/PageAdmin/ProjectPage.vue?0fa5","webpack:///./src/views/PageAdmin/ProjectPage.vue?5d73","webpack:///src/views/PageAdmin/ProjectPage.vue","webpack:///./src/views/PageAdmin/ProjectPage.vue?312e","webpack:///./src/views/PageAdmin/ProjectPage.vue?990b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","attrs","on","$event","addDialog","done","ref","create","rules","model","value","callback","$$v","$set","expression","$http","defaults","baseURL","afterUpload","img_url","slot","createLoading","createProject","updateDialog","update","updateProject","projectList","scopedSlots","_u","key","fn","row","scope","_s","_f","updated","setCurrent","removed","staticRenderFns","name","data","updateLoading","project_name","project_url","desc","methods","res","filename","$refs","createForm","validate","reset","resetFields","_id","project","image","updateForm","$confirm","confirmButtonText","cancelButtonText","type","created","getProject","component"],"mappings":"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","file":"js/chunk-091cb75e.9e4af64a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectPage.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectPage.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"projectlist-page\"},[_c('h2',[_vm._v(\"项目管理\")]),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialog = true}}},[_vm._v(\"添加项目\")]),_c('el-dialog',{attrs:{\"title\":\"添加项目\",\"modal-append-to-body\":false,\"visible\":_vm.addDialog,\"width\":\"30%\",\"before-close\":function (done) { return done(); }},on:{\"update:visible\":function($event){_vm.addDialog=$event}}},[_c('el-form',{ref:\"createForm\",attrs:{\"model\":_vm.create,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"项目名称\",\"prop\":\"project_name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目名称\"},model:{value:(_vm.create.project_name),callback:function ($$v) {_vm.$set(_vm.create, \"project_name\", $$v)},expression:\"create.project_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目描述\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目描述\"},model:{value:(_vm.create.desc),callback:function ($$v) {_vm.$set(_vm.create, \"desc\", $$v)},expression:\"create.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目地址\",\"prop\":\"project_url\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目地址\"},model:{value:(_vm.create.project_url),callback:function ($$v) {_vm.$set(_vm.create, \"project_url\", $$v)},expression:\"create.project_url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目封面\",\"prop\":\"img_url\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目封面地址\"},model:{value:(_vm.create.img_url),callback:function ($$v) {_vm.$set(_vm.create, \"img_url\", $$v)},expression:\"create.img_url\"}}),_vm._v(\"或 \"),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.$http.defaults.baseURL + '/upload',\"show-file-list\":false,\"on-success\":_vm.afterUpload}},[(_vm.create.img_url)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.create.img_url}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.createLoading},on:{\"click\":function($event){return _vm.createProject('create')}}},[_vm._v(\"添 加\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑项目\",\"modal-append-to-body\":false,\"visible\":_vm.updateDialog,\"width\":\"30%\",\"before-close\":function (done) { return done(); }},on:{\"update:visible\":function($event){_vm.updateDialog=$event}}},[_c('el-form',{ref:\"updateForm\",attrs:{\"model\":_vm.update,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"项目名称\",\"prop\":\"project_name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目名称\"},model:{value:(_vm.update.project_name),callback:function ($$v) {_vm.$set(_vm.update, \"project_name\", $$v)},expression:\"update.project_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目描述\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目描述\"},model:{value:(_vm.update.desc),callback:function ($$v) {_vm.$set(_vm.update, \"desc\", $$v)},expression:\"update.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目地址\",\"prop\":\"project_url\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目地址\"},model:{value:(_vm.update.project_url),callback:function ($$v) {_vm.$set(_vm.update, \"project_url\", $$v)},expression:\"update.project_url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"项目封面\",\"prop\":\"img_url\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入项目封面地址\"},model:{value:(_vm.update.img_url),callback:function ($$v) {_vm.$set(_vm.update, \"img_url\", $$v)},expression:\"update.img_url\"}}),_vm._v(\"或 \"),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.$http.defaults.baseURL + '/upload',\"show-file-list\":false,\"on-success\":_vm.afterUpload}},[(_vm.update.img_url)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.update.img_url}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.updateDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.updateProject(_vm.update)}}},[_vm._v(\"修 改\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"80%\",\"margin\":\"0 auto\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.projectList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"project_name\",\"label\":\"项目名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"desc\",\"label\":\"描述\"}}),_c('el-table-column',{attrs:{\"prop\":\"project_url\",\"label\":\"地址\"}}),_c('el-table-column',{attrs:{\"prop\":\"img_url\",\"label\":\"封面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('img',{staticStyle:{\"margin\":\"0\",\"width\":\"100px\",\"height\":\"130px\"},attrs:{\"src\":row.img_url}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"updated\",\"label\":\"更新时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"timeFormat\")(scope.row.updated)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.setCurrent(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.removed(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"projectlist-page\">\r\n    <h2>项目管理</h2>\r\n    <el-button style=\"margin-left: 20px;\" type=\"primary\" @click=\"addDialog = true\">添加项目</el-button>\r\n\r\n    <!-- 添加项目 -->\r\n    <el-dialog\r\n      title=\"添加项目\"\r\n      :modal-append-to-body=\"false\"\r\n      :visible.sync=\"addDialog\"\r\n      width=\"30%\"\r\n      :before-close=\"done => done()\"\r\n    >\r\n      <el-form :model=\"create\" :rules=\"rules\" ref=\"createForm\" label-width=\"80px\">\r\n        <el-form-item label=\"项目名称\" prop=\"project_name\">\r\n          <el-input v-model=\"create.project_name\" placeholder=\"请输入项目名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目描述\" prop=\"desc\">\r\n          <el-input v-model=\"create.desc\" placeholder=\"请输入项目描述\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目地址\" prop=\"project_url\">\r\n          <el-input v-model=\"create.project_url\" placeholder=\"请输入项目地址\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目封面\" prop=\"img_url\">\r\n          <el-input v-model=\"create.img_url\" placeholder=\"请输入项目封面地址\"></el-input>或\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            :action=\"$http.defaults.baseURL + '/upload'\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"afterUpload\"\r\n          >\r\n            <img v-if=\"create.img_url\" :src=\"create.img_url\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" :loading=\"createLoading\" @click=\"createProject('create')\">添 加</el-button>\r\n        <!-- @keyup.enter=\"createProject('create')\" -->\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 编辑项目 -->\r\n    <el-dialog\r\n      title=\"编辑项目\"\r\n      :modal-append-to-body=\"false\"\r\n      :visible.sync=\"updateDialog\"\r\n      width=\"30%\"\r\n      :before-close=\"done => done()\"\r\n    >\r\n      <el-form :model=\"update\" :rules=\"rules\" ref=\"updateForm\" label-width=\"80px\">\r\n        <el-form-item label=\"项目名称\" prop=\"project_name\">\r\n          <el-input v-model=\"update.project_name\" placeholder=\"请输入项目名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目描述\" prop=\"desc\">\r\n          <el-input v-model=\"update.desc\" placeholder=\"请输入项目描述\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目地址\" prop=\"project_url\">\r\n          <el-input v-model=\"update.project_url\" placeholder=\"请输入项目地址\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"项目封面\" prop=\"img_url\">\r\n          <el-input v-model=\"update.img_url\" placeholder=\"请输入项目封面地址\"></el-input>或\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            :action=\"$http.defaults.baseURL + '/upload'\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"afterUpload\"\r\n          >\r\n            <img v-if=\"update.img_url\" :src=\"update.img_url\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"updateDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateProject(update)\">修 改</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 表格数据列表 -->\r\n    <el-table :data=\"projectList\" border style=\"width: 80%; margin: 0 auto; margin-top: 20px\">\r\n      <el-table-column type=\"index\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"project_name\" label=\"项目名称\"></el-table-column>\r\n      <el-table-column prop=\"desc\" label=\"描述\"></el-table-column>\r\n      <el-table-column prop=\"project_url\" label=\"地址\"></el-table-column>\r\n      <el-table-column prop=\"img_url\" label=\"封面\">\r\n        <template slot-scope=\"{ row }\">\r\n          <img :src=\"row.img_url\" style=\"margin: 0; width: 100px; height: 130px;\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"updated\" label=\"更新时间\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.updated | timeFormat }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"setCurrent(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"removed(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"List\",\r\n  data() {\r\n    return {\r\n      addDialog: false,\r\n      updateDialog: false, // 编辑是否显示弹窗\r\n      createLoading: false,\r\n      updateLoading: false,\r\n      create: {\r\n        project_name: \"\",\r\n        project_url: \"\",\r\n        desc: \"\",\r\n        img_url: \"\"\r\n      }, // 添加的表单项\r\n      update: {\r\n        project_name: \"\",\r\n        project_url: \"\",\r\n        desc: \"\",\r\n        img_url: \"\"\r\n      }, // 修改的表单项\r\n      rules: {\r\n        project_name: [\r\n          { required: true, message: \"请输入项目名称\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      projectList: []\r\n    };\r\n  },\r\n  methods: {\r\n    // 图片上传\r\n    afterUpload(res) {\r\n      // this.create.image = res.filename;\r\n      this.create.img_url = res.filename;\r\n    },\r\n\r\n    // 创建项目\r\n    createProject() {\r\n      this.$refs.createForm.validate(async valid => {\r\n        if (valid) {\r\n          this.createLoading = true;\r\n          await this.$http.post(\"/project\", this.create);\r\n          this.$message.success(\"创建项目成功！\");\r\n          this.addDialog = false;\r\n          this.createLoading = false;\r\n          this.reset();\r\n          this.getProject();\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n    // 重置表单\r\n    reset() {\r\n      this.$refs.createForm.resetFields();\r\n    },\r\n\r\n    // 编辑时数据\r\n    setCurrent(project) {\r\n      this.update._id = project._id;\r\n      this.update.project_name = project.project_name;\r\n      this.update.project_url = project.project_url;\r\n      this.update.desc = project.desc;\r\n      this.update.img_url = project.img_url;\r\n      this.update.image = project.image;\r\n      this.updateDialog = true;\r\n    },\r\n\r\n    // 修改项目列表\r\n    updateProject(update) {\r\n      this.$refs.updateForm.validate(async valid => {\r\n        if (valid) {\r\n          this.updateLoading = true;\r\n          await this.$http.put(`/project/${update._id}`, this.update);\r\n          // console.log(this.update);\r\n          this.$message.success(\"修改项目成功！\");\r\n          this.updateDialog = false;\r\n          this.updateLoading = false;\r\n          this.getProject();\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n    // 删除\r\n    removed(row) {\r\n      // console.log(row._id, row.project_name);\r\n      this.$confirm(`是否删除项目 \"${row.project_name}\"`, \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(async () => {\r\n          await this.$http.delete(`/project/${row._id}`);\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功!\"\r\n          });\r\n          this.getProject();\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n\r\n    // 获取项目列表\r\n    async getProject() {\r\n      const res = await this.$http(\"/project\");\r\n      this.projectList = res.data.data;\r\n    }\r\n  },\r\n  created() {\r\n    this.getProject();\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-table td,\r\n.el-table th {\r\n  text-align: center !important;\r\n}\r\n.avatar-uploader .el-upload {\r\n  margin-top: 10px;\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 130px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 130px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjectPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjectPage.vue?vue&type=template&id=2b01a2a8&\"\nimport script from \"./ProjectPage.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjectPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProjectPage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}